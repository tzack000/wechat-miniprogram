<!-- pages/user/center/center.wxml -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header">
    <view class="user-info" wx:if="{{isLoggedIn}}">
      <image class="avatar" src="{{userInfo.avatarUrl || '/images/avatar-default.png'}}"></image>
      <view class="user-detail">
        <view class="nickname">{{userInfo.nickName || 'ç”¨æˆ·'}}</view>
        <view class="user-tag" wx:if="{{isAdmin}}">
          <text class="tag tag-primary">ç®¡ç†å‘˜</text>
        </view>
      </view>
    </view>
    
    <view class="login-prompt" wx:else>
      <image class="avatar avatar-default" src="/images/avatar-default.png"></image>
      <button class="login-btn" bindtap="getUserProfile">ç‚¹å‡»ç™»å½•</button>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section card">
    <view class="menu-title">æˆ‘çš„æœåŠ¡</view>
    <view 
      class="menu-item"
      wx:for="{{menuList}}"
      wx:key="id"
      bindtap="onMenuTap"
      data-url="{{item.url}}"
    >
      <view class="menu-icon">{{item.icon}}</view>
      <view class="menu-text">{{item.title}}</view>
      <view class="menu-arrow">></view>
    </view>
  </view>

  <!-- ç®¡ç†å‘˜èœå•ï¼ˆç®¡ç†å‘˜å¯è§å…¨éƒ¨ï¼Œéç®¡ç†å‘˜åªæ˜¾ç¤ºè®¾ç½®å…¥å£ï¼‰ -->
  <view class="menu-section card">
    <view class="menu-title">ç®¡ç†åŠŸèƒ½</view>
    <!-- ç®¡ç†å‘˜å¯è§çš„èœå• -->
    <block wx:if="{{isAdmin}}">
      <view 
        class="menu-item"
        wx:for="{{adminMenuList}}"
        wx:key="id"
        bindtap="onAdminMenuTap"
        data-url="{{item.url}}"
        data-id="{{item.id}}"
      >
        <view class="menu-icon">{{item.icon}}</view>
        <view class="menu-text">{{item.title}}</view>
        <view class="menu-arrow">></view>
      </view>
    </block>
    <!-- éç®¡ç†å‘˜åªæ˜¾ç¤ºç®¡ç†å‘˜è®¾ç½®å…¥å£ -->
    <block wx:else>
      <view 
        class="menu-item"
        bindtap="onAdminMenuTap"
        data-url="/pages/admin/settings/settings"
        data-id="admin-settings"
      >
        <view class="menu-icon">ğŸ‘‘</view>
        <view class="menu-text">æˆä¸ºç®¡ç†å‘˜</view>
        <view class="menu-arrow">></view>
      </view>
    </block>
  </view>

  <!-- å…¶ä»–æ“ä½œ -->
  <view class="menu-section card">
    <view class="menu-item" bindtap="onAbout">
      <view class="menu-icon">â„¹ï¸</view>
      <view class="menu-text">å…³äºæˆ‘ä»¬</view>
      <view class="menu-arrow">></view>
    </view>
    
    <view class="menu-item" wx:if="{{isLoggedIn}}" bindtap="onLogout">
      <view class="menu-icon">ğŸšª</view>
      <view class="menu-text text-error">é€€å‡ºç™»å½•</view>
      <view class="menu-arrow">></view>
    </view>
  </view>
</view>
