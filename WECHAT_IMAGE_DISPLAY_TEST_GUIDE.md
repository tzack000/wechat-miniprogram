# 微信开发者工具图片显示效果测试指南

## 📋 测试概述

本指南帮助您在微信开发者工具中测试场馆和课程图片的显示效果。

**测试日期**: 2026-01-20  
**图片数量**: 20张（10张场馆 + 10张课程）  
**图片位置**: `miniprogram/images/venues/` 和 `miniprogram/images/courses/`

## 🚀 准备工作

### 1. 更新代码到最新版本

```bash
# 在项目根目录执行
git pull origin main
```

**预期结果**: 拉取到提交 `1bd2b52` (feat: 添加场馆和课程图片展示及相关功能)

### 2. 确认图片文件存在

在微信开发者工具的项目目录中，检查以下文件：

**场馆图片** (miniprogram/images/venues/):
- ✓ basketball_1.jpg
- ✓ basketball_2.jpg
- ✓ badminton_1.jpg
- ✓ badminton_2.jpg
- ✓ swimming_1.jpg
- ✓ table_tennis_1.jpg
- ✓ gym_1.jpg
- ✓ tennis_1.jpg
- ✓ yoga_1.jpg
- ✓ football_1.jpg

**课程图片** (miniprogram/images/courses/):
- ✓ yoga_1.jpg, yoga_2.jpg
- ✓ swimming_1.jpg, swimming_2.jpg
- ✓ basketball_1.jpg, basketball_2.jpg
- ✓ fitness_1.jpg, fitness_2.jpg
- ✓ dance_1.jpg, dance_2.jpg

### 3. 导入测试数据

**重要**: 在导入数据前，需要先上传更新后的云函数！

#### 步骤A：上传云函数（必需）

云函数已更新以支持图片路径，需要先上传到云端：

**上传initTestData云函数**:
1. 在微信开发者工具中，右键点击 `cloudfunctions/initTestData`
2. 选择"上传并部署：云端安装依赖"
3. 等待上传完成（约10-30秒）

**上传initCourseData云函数**:
1. 右键点击 `cloudfunctions/initCourseData`
2. 选择"上传并部署：云端安装依赖"
3. 等待上传完成

**验证上传**:
- 打开"云开发控制台"
- 进入"云函数"页面
- 检查两个函数的更新时间是否为最新

#### 步骤B：初始化数据

#### 方式1：使用云函数初始化（推荐）

**初始化场馆数据**:
```javascript
// 云开发控制台 → 云函数 → initTestData → 测试
{
  "action": "venues",
  "clear": true
}
```

**初始化课程数据**:
```javascript
// 云开发控制台 → 云函数 → initCourseData → 测试
{
  "action": "init",
  "clear": true
}
```

**参数说明**:
- `clear: true` - 首次使用，清除旧数据
- `clear: false` - 保留现有数据，仅添加新数据

#### 方式2：手动导入JSON文件

⚠️ **注意**: 手动导入的JSON文件已包含图片路径，无需额外配置。

1. 打开"云开发控制台" → "数据库"
2. 选择 `venues` 集合 → "导入" → 选择 `database/test_data/venues.json`
3. 选择 `courses` 集合 → "导入" → 选择 `database/test_data/courses.json`

## 📸 测试步骤

### 测试1：场馆列表页面图片显示

#### 操作步骤：
1. 在微信开发者工具中点击"编译"按钮
2. 在模拟器中点击底部导航栏 "场馆预约"
3. 进入场馆列表页面

#### 检查项：
- [ ] 页面能正常加载
- [ ] 每个场馆卡片都显示图片
- [ ] 图片显示清晰，无模糊
- [ ] 图片比例正确，无拉伸变形
- [ ] 不同类型场馆显示不同颜色的图片
- [ ] 加载速度快（图片已优化至9-12KB）

#### 预期效果：
```
┌─────────────────────────────────┐
│ 🏀 篮球场A                      │
│ ┌─────────────────────────────┐ │
│ │     橙色背景 + "篮球场A"    │ │
│ └─────────────────────────────┘ │
│ 标准室内篮球场...              │
│ ¥100/小时                       │
└─────────────────────────────────┘
```

#### 场馆图片颜色对照：
- 🏀 篮球场 → 橙色
- 🏸 羽毛球场 → 蓝色
- 🏊 游泳馆 → 浅蓝色
- 🏓 乒乓球室 → 红色
- 💪 健身房 → 紫色
- 🎾 网球场 → 绿色
- 🧘 瑜伽室 → 淡紫色
- ⚽ 足球场 → 深绿色

### 测试2：场馆详情页图片显示

#### 操作步骤：
1. 从场馆列表中点击任意一个场馆
2. 进入场馆详情页

#### 检查项：
- [ ] 详情页顶部显示场馆图片
- [ ] 图片全屏显示（或按设计比例显示）
- [ ] 图片与场馆信息匹配
- [ ] 如果有多张图片，支持左右滑动查看

### 测试3：课程列表页面图片显示

#### 操作步骤：
1. 点击底部导航栏 "课程预约"（新增的第3个tab）
2. 进入课程列表页面

#### 检查项：
- [ ] 页面能正常加载
- [ ] 每个课程卡片都显示图片
- [ ] 图片显示清晰，色彩鲜艳
- [ ] 不同类型课程显示不同颜色的图片
- [ ] 可以按课程类型筛选

#### 预期效果：
```
┌─────────────────────────────────┐
│ 哈他瑜伽基础课                  │
│ ┌─────────────────────────────┐ │
│ │   紫罗兰背景 + "瑜伽课程"   │ │
│ │          基础              │ │
│ └─────────────────────────────┘ │
│ 张教练 · 60分钟 · ¥88          │
└─────────────────────────────────┘
```

#### 课程图片颜色对照：
- 🧘 瑜伽课程 → 紫罗兰色
- 🏊 游泳课程 → 青绿色
- 🏀 篮球课程 → 橙色
- 💪 健身课程 → 深红色
- 💃 舞蹈课程 → 粉红色

### 测试4：课程详情页图片显示

#### 操作步骤：
1. 从课程列表中点击任意一个课程
2. 进入课程详情页

#### 检查项：
- [ ] 详情页显示课程图片
- [ ] 图片与课程类型匹配
- [ ] 教练头像正常显示（如果有）

### 测试5：教练列表页图片显示

#### 操作步骤：
1. 在首页或课程页面找到"教练列表"入口
2. 进入教练列表页面

#### 检查项：
- [ ] 每个教练显示头像
- [ ] 教练头像为圆形
- [ ] 点击教练可查看详情
- [ ] 教练关联的课程正确显示

### 测试6：用户中心"我的课程"

#### 操作步骤：
1. 点击底部导航栏 "我的"
2. 点击 "📚 我的课程" 菜单项

#### 检查项：
- [ ] 能正常跳转到"我的课程"页面
- [ ] 已预约的课程显示图片
- [ ] 图片与课程类型匹配

## 🔍 图片路径验证

### 在代码中检查图片路径

#### 场馆列表页面 (pages/venue/list/list.wxml)
```xml
<!-- 检查image标签的src属性 -->
<image 
  src="{{venue.images[0]}}" 
  mode="aspectFill"
  class="venue-image"
/>
```

**正确的路径格式**:
- `images/venues/basketball_1.jpg`
- `images/venues/swimming_1.jpg`
- ❌ 不应该是绝对路径 `/images/...`
- ❌ 不应该包含 `miniprogram/`

#### 课程列表页面 (pages/course/list/list.wxml)
```xml
<!-- 检查image标签的src属性 -->
<image 
  src="{{course.images[0]}}" 
  mode="aspectFill"
  class="course-image"
/>
```

## ⚠️ 常见问题排查

### 问题1：图片不显示（显示空白或裂图）

**可能原因**:
1. 图片路径错误
2. 图片文件未上传到云存储
3. 数据库中的图片路径配置错误

**解决方案**:
```javascript
// 在pages/venue/list/list.js中添加调试代码
onLoad() {
  console.log('场馆数据:', this.data.venueList)
  // 检查每个场馆的images字段
  this.data.venueList.forEach(venue => {
    console.log(`${venue.name} 图片:`, venue.images)
  })
}
```

### 问题2：图片显示但样式不对

**检查CSS样式**:
```css
/* pages/venue/list/list.wxss */
.venue-image {
  width: 100%;
  height: 400rpx;
  border-radius: 16rpx;
}
```

### 问题3：图片加载慢

**优化建议**:
1. 使用懒加载：`<image lazy-load="true" />`
2. 添加加载占位图：`<image show-menu-by-longpress="{{false}}" />`
3. 使用云存储CDN（生产环境）

### 问题4：本地图片vs云存储图片

**当前状态**: 图片存储在项目本地 `miniprogram/images/`

**路径格式**:
- ✅ 本地路径: `images/venues/basketball_1.jpg`
- ❌ 云存储URL: `cloud://xxx.xxx/venues/basketball_1.jpg`

**如果要使用云存储**:
1. 上传图片到云存储
2. 获取云文件ID或HTTP URL
3. 更新数据库中的图片路径

## 📊 测试检查清单

### 基础功能测试
- [ ] 场馆列表显示10个场馆，每个都有图片
- [ ] 课程列表显示10个课程，每个都有图片
- [ ] 图片清晰，无模糊
- [ ] 图片比例正确，无拉伸
- [ ] 不同类型使用不同颜色

### 交互测试
- [ ] 点击场馆卡片能进入详情页
- [ ] 点击课程卡片能进入详情页
- [ ] 图片加载流畅，无卡顿
- [ ] 左右滑动图片正常（如果有多图）

### 性能测试
- [ ] 首次加载时间 < 2秒
- [ ] 图片加载时间 < 1秒
- [ ] 内存占用合理（< 50MB）
- [ ] 滑动列表流畅（60fps）

### 兼容性测试
- [ ] iOS模拟器显示正常
- [ ] Android模拟器显示正常
- [ ] 真机预览显示正常
- [ ] 不同屏幕尺寸适配正常

## 📝 测试记录模板

```markdown
## 图片显示测试记录

**测试人员**: ___________
**测试时间**: ___________
**开发工具版本**: ___________
**基础库版本**: ___________

### 场馆图片测试
- 篮球场A: [ ] 正常 [ ] 异常 - 备注: ___________
- 篮球场B: [ ] 正常 [ ] 异常 - 备注: ___________
- 羽毛球馆1号场: [ ] 正常 [ ] 异常 - 备注: ___________
- 羽毛球馆2号场: [ ] 正常 [ ] 异常 - 备注: ___________
- 游泳馆: [ ] 正常 [ ] 异常 - 备注: ___________
- 乒乓球室: [ ] 正常 [ ] 异常 - 备注: ___________
- 健身房: [ ] 正常 [ ] 异常 - 备注: ___________
- 网球场: [ ] 正常 [ ] 异常 - 备注: ___________
- 瑜伽室: [ ] 正常 [ ] 异常 - 备注: ___________
- 足球场: [ ] 正常 [ ] 异常 - 备注: ___________

### 课程图片测试
- 哈他瑜伽基础课: [ ] 正常 [ ] 异常 - 备注: ___________
- 流瑜伽进阶课: [ ] 正常 [ ] 异常 - 备注: ___________
- 自由泳基础班: [ ] 正常 [ ] 异常 - 备注: ___________
- 蛙泳提高课: [ ] 正常 [ ] 异常 - 备注: ___________
- 篮球基础训练: [ ] 正常 [ ] 异常 - 备注: ___________
- 篮球战术进阶: [ ] 正常 [ ] 异常 - 备注: ___________
- 增肌塑形私教课: [ ] 正常 [ ] 异常 - 备注: ___________
- 减脂燃脂团课: [ ] 正常 [ ] 异常 - 备注: ___________
- 爵士舞入门: [ ] 正常 [ ] 异常 - 备注: ___________
- 街舞基础班: [ ] 正常 [ ] 异常 - 备注: ___________

### 整体评价
- 图片质量: [ ] 优秀 [ ] 良好 [ ] 一般 [ ] 需改进
- 加载速度: [ ] 优秀 [ ] 良好 [ ] 一般 [ ] 需改进
- 用户体验: [ ] 优秀 [ ] 良好 [ ] 一般 [ ] 需改进

### 问题记录
1. ___________________________________________
2. ___________________________________________
3. ___________________________________________

### 改进建议
1. ___________________________________________
2. ___________________________________________
3. ___________________________________________
```

## 🎯 测试成功标准

### 必须满足（P0）
- ✅ 所有场馆都能正确显示图片
- ✅ 所有课程都能正确显示图片
- ✅ 图片路径配置正确
- ✅ 无图片加载错误

### 建议满足（P1）
- ✅ 图片加载时间 < 1秒
- ✅ 图片清晰度良好
- ✅ 颜色区分明显
- ✅ 列表滑动流畅

### 优化目标（P2）
- ✅ 支持图片懒加载
- ✅ 支持图片预加载
- ✅ 支持图片缓存
- ✅ 支持离线查看

## 📞 需要帮助？

如果在测试过程中遇到问题：

1. **查看控制台日志**
   - 打开"调试器" → "Console"
   - 查看是否有图片加载错误

2. **检查网络请求**
   - 打开"调试器" → "Network"
   - 查看图片请求是否成功（状态码200）

3. **验证数据**
   - 打开"云开发控制台" → "数据库"
   - 检查venues和courses集合中的images字段

4. **运行测试脚本**
   ```bash
   node tests/venue_course_images_test.js
   ```

## 📚 相关文档

- [IMAGE_ADDITION_SUMMARY.md](IMAGE_ADDITION_SUMMARY.md) - 图片添加总结
- [WECHAT_DEV_TEST_GUIDE.md](WECHAT_DEV_TEST_GUIDE.md) - 完整开发测试指南
- [tests/venue_course_images_test.js](tests/venue_course_images_test.js) - 图片配置测试脚本

---

**祝测试顺利！** 🎉

如有任何问题，请及时反馈。
