# äº‘å‡½æ•°æ›´æ–°è¯´æ˜ - æ·»åŠ å›¾ç‰‡è·¯å¾„æ”¯æŒ

## ğŸ“‹ æ›´æ–°æ¦‚è¿°

**æ›´æ–°æ—¥æœŸ**: 2026-01-20  
**æ›´æ–°å†…å®¹**: ä¸ºæ•°æ®åˆå§‹åŒ–äº‘å‡½æ•°æ·»åŠ å›¾ç‰‡è·¯å¾„é…ç½®

## ğŸ”„ æ›´æ–°çš„äº‘å‡½æ•°

### 1. initTestData äº‘å‡½æ•°

**æ–‡ä»¶è·¯å¾„**: `cloudfunctions/initTestData/index.js`

**æ›´æ–°å†…å®¹**:
- ä¸ºæ‰€æœ‰10ä¸ªåœºé¦†æ·»åŠ äº†å›¾ç‰‡è·¯å¾„é…ç½®
- å›¾ç‰‡è·¯å¾„æ ¼å¼: `images/venues/[ç±»å‹]_[ç¼–å·].jpg`

**æ›´æ–°çš„åœºé¦†**:
1. ç¯®çƒåœºA â†’ `images/venues/basketball_1.jpg`
2. ç¯®çƒåœºB â†’ `images/venues/basketball_2.jpg`
3. ç¾½æ¯›çƒé¦†1å·åœº â†’ `images/venues/badminton_1.jpg`
4. ç¾½æ¯›çƒé¦†2å·åœº â†’ `images/venues/badminton_2.jpg`
5. æ¸¸æ³³é¦† â†’ `images/venues/swimming_1.jpg`
6. ä¹’ä¹“çƒå®¤ â†’ `images/venues/table_tennis_1.jpg`
7. å¥èº«æˆ¿ â†’ `images/venues/gym_1.jpg`
8. ç½‘çƒåœº â†’ `images/venues/tennis_1.jpg`
9. ç‘œä¼½å®¤ â†’ `images/venues/yoga_1.jpg`
10. è¶³çƒåœºï¼ˆç»´æŠ¤ä¸­ï¼‰â†’ `images/venues/football_1.jpg`

### 2. initCourseData äº‘å‡½æ•°

**æ–‡ä»¶è·¯å¾„**: `cloudfunctions/initCourseData/index.js`

**æ›´æ–°å†…å®¹**:
- å°†æ‰€æœ‰è¯¾ç¨‹çš„äº‘å­˜å‚¨è·¯å¾„æ›¿æ¢ä¸ºæœ¬åœ°å›¾ç‰‡è·¯å¾„
- æ·»åŠ äº†2ä¸ªç¼ºå¤±çš„è¯¾ç¨‹ï¼ˆè›™æ³³æé«˜è¯¾ã€ç¯®çƒæˆ˜æœ¯è¿›é˜¶ï¼‰
- æ€»å…±10ä¸ªè¯¾ç¨‹ï¼Œæ¯ä¸ªéƒ½æœ‰é…å›¾

**æ›´æ–°çš„è¯¾ç¨‹**:
1. å“ˆä»–ç‘œä¼½åŸºç¡€è¯¾ â†’ `images/courses/yoga_1.jpg`
2. æµç‘œä¼½è¿›é˜¶è¯¾ â†’ `images/courses/yoga_2.jpg`
3. è‡ªç”±æ³³åŸºç¡€ç­ â†’ `images/courses/swimming_1.jpg`
4. è›™æ³³æé«˜è¯¾ â†’ `images/courses/swimming_2.jpg` â­æ–°å¢
5. ç¯®çƒåŸºç¡€è®­ç»ƒ â†’ `images/courses/basketball_1.jpg`
6. ç¯®çƒæˆ˜æœ¯è¿›é˜¶ â†’ `images/courses/basketball_2.jpg` â­æ–°å¢
7. å¢è‚Œå¡‘å½¢ç§æ•™è¯¾ â†’ `images/courses/fitness_1.jpg`
8. å‡è„‚ç‡ƒè„‚å›¢è¯¾ â†’ `images/courses/fitness_2.jpg`
9. çˆµå£«èˆå…¥é—¨ â†’ `images/courses/dance_1.jpg`
10. è¡—èˆåŸºç¡€ç­ â†’ `images/courses/dance_2.jpg`

## ğŸ“¤ ä¸Šä¼ äº‘å‡½æ•°

### æ–¹å¼1ï¼šé€šè¿‡å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šä¼ ï¼ˆæ¨èï¼‰

#### æ­¥éª¤ï¼š

1. **æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·**
   - æ‰“å¼€æ‚¨çš„å°ç¨‹åºé¡¹ç›®

2. **ä¸Šä¼  initTestData äº‘å‡½æ•°**
   ```
   å³é”® cloudfunctions/initTestData ç›®å½•
   â†’ é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"
   â†’ ç­‰å¾…ä¸Šä¼ å®Œæˆ
   ```

3. **ä¸Šä¼  initCourseData äº‘å‡½æ•°**
   ```
   å³é”® cloudfunctions/initCourseData ç›®å½•
   â†’ é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"
   â†’ ç­‰å¾…ä¸Šä¼ å®Œæˆ
   ```

4. **éªŒè¯ä¸Šä¼ **
   - æ‰“å¼€"äº‘å¼€å‘æ§åˆ¶å°"
   - è¿›å…¥"äº‘å‡½æ•°"é¡µé¢
   - æ£€æŸ¥ä¸¤ä¸ªäº‘å‡½æ•°çš„æ›´æ–°æ—¶é—´æ˜¯å¦ä¸ºæœ€æ–°

### æ–¹å¼2ï¼šé€šè¿‡å‘½ä»¤è¡Œä¸Šä¼ 

å¦‚æœæ‚¨é…ç½®äº†äº‘å¼€å‘CLIå·¥å…·ï¼š

```bash
# ä¸Šä¼  initTestData
cd cloudfunctions/initTestData
tcb fn deploy initTestData

# ä¸Šä¼  initCourseData
cd ../initCourseData
tcb fn deploy initCourseData
```

## ğŸš€ ä½¿ç”¨äº‘å‡½æ•°åˆå§‹åŒ–æ•°æ®

### åœºé¦†æ•°æ®åˆå§‹åŒ–

#### æ–¹æ³•1ï¼šåˆå§‹åŒ–æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬åœºé¦†ï¼‰

```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ äº‘å‡½æ•° â†’ initTestData â†’ æµ‹è¯•
{
  "action": "all",
  "clear": false
}
```

**è¯´æ˜**:
- `action: "all"` - åˆå§‹åŒ–æ‰€æœ‰æ•°æ®ï¼ˆåœºé¦†ã€ç”¨æˆ·ã€é¢„çº¦ã€åœè½¦ç­‰ï¼‰
- `clear: false` - ä¸æ¸…é™¤ç°æœ‰æ•°æ®
- `clear: true` - æ¸…é™¤ç°æœ‰æ•°æ®åé‡æ–°åˆå§‹åŒ–

#### æ–¹æ³•2ï¼šåªåˆå§‹åŒ–åœºé¦†æ•°æ®

```javascript
{
  "action": "venues",
  "clear": false
}
```

### è¯¾ç¨‹æ•°æ®åˆå§‹åŒ–

```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ äº‘å‡½æ•° â†’ initCourseData â†’ æµ‹è¯•
{
  "action": "init",
  "clear": false
}
```

**è¯´æ˜**:
- `action: "init"` - åˆå§‹åŒ–æ•™ç»ƒã€è¯¾ç¨‹å’Œæ’æœŸæ•°æ®
- `clear: false` - ä¿ç•™ç°æœ‰æ•°æ®
- `clear: true` - æ¸…é™¤coursesã€coachesã€course_schedulesé›†åˆåé‡æ–°åˆå§‹åŒ–

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ¸…é™¤æ•°æ®å‰çš„æç¤º

**ä½¿ç”¨ `clear: true` ä¼šåˆ é™¤ä»¥ä¸‹æ•°æ®**:

å¯¹äº `initTestData`:
- venuesï¼ˆåœºé¦†ï¼‰
- usersï¼ˆç”¨æˆ·ï¼‰
- bookingsï¼ˆé¢„çº¦ï¼‰
- parking_recordsï¼ˆåœè½¦è®°å½•ï¼‰
- parking_configï¼ˆåœè½¦é…ç½®ï¼‰

å¯¹äº `initCourseData`:
- coachesï¼ˆæ•™ç»ƒï¼‰
- coursesï¼ˆè¯¾ç¨‹ï¼‰
- course_schedulesï¼ˆè¯¾ç¨‹æ’æœŸï¼‰
- course_bookingsï¼ˆè¯¾ç¨‹é¢„çº¦ï¼‰

**å»ºè®®**: 
- é¦–æ¬¡ä½¿ç”¨æ—¶å¯ä»¥è®¾ç½® `clear: true`
- åç»­æ›´æ–°æ•°æ®æ—¶ä½¿ç”¨ `clear: false`
- ç”Ÿäº§ç¯å¢ƒè°¨æ…ä½¿ç”¨ `clear: true`

### 2. å›¾ç‰‡è·¯å¾„è¯´æ˜

äº‘å‡½æ•°ä¸­é…ç½®çš„å›¾ç‰‡è·¯å¾„ä¸º**ç›¸å¯¹è·¯å¾„**:
- âœ… æ­£ç¡®: `images/venues/basketball_1.jpg`
- âŒ é”™è¯¯: `/images/venues/basketball_1.jpg`ï¼ˆä¸è¦åŠ å‰å¯¼æ–œæ ï¼‰
- âŒ é”™è¯¯: `miniprogram/images/venues/basketball_1.jpg`ï¼ˆä¸è¦åŒ…å«miniprogramï¼‰

### 3. ä¸Šä¼ é¡ºåº

å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºåˆå§‹åŒ–ï¼š

1. **å…ˆä¸Šä¼ äº‘å‡½æ•°** â†’ ç¡®ä¿æœ€æ–°ä»£ç 
2. **åˆå§‹åŒ–åœºé¦†æ•°æ®** â†’ `initTestData` (action: "venues")
3. **åˆå§‹åŒ–è¯¾ç¨‹æ•°æ®** â†’ `initCourseData` (action: "init")
4. **åœ¨å°ç¨‹åºä¸­æµ‹è¯•** â†’ æŸ¥çœ‹å›¾ç‰‡æ˜¾ç¤ºæ•ˆæœ

## ğŸ§ª éªŒè¯æ­¥éª¤

### 1. éªŒè¯äº‘å‡½æ•°ä¸Šä¼ æˆåŠŸ

åœ¨äº‘å¼€å‘æ§åˆ¶å°æ£€æŸ¥ï¼š
- âœ… äº‘å‡½æ•°åˆ—è¡¨ä¸­çœ‹åˆ° `initTestData` å’Œ `initCourseData`
- âœ… æ›´æ–°æ—¶é—´ä¸ºæœ€æ–°
- âœ… è¿è¡ŒçŠ¶æ€æ­£å¸¸

### 2. éªŒè¯æ•°æ®åˆå§‹åŒ–æˆåŠŸ

#### åœºé¦†æ•°æ®éªŒè¯
```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ venues é›†åˆ
// æŸ¥è¯¢ä»»æ„ä¸€æ¡è®°å½•ï¼Œæ£€æŸ¥ images å­—æ®µ
// åº”è¯¥çœ‹åˆ°: ["images/venues/basketball_1.jpg"]
```

#### è¯¾ç¨‹æ•°æ®éªŒè¯
```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ courses é›†åˆ
// æŸ¥è¯¢ä»»æ„ä¸€æ¡è®°å½•ï¼Œæ£€æŸ¥ images å­—æ®µ
// åº”è¯¥çœ‹åˆ°: ["images/courses/yoga_1.jpg"]
```

### 3. éªŒè¯å›¾ç‰‡æ˜¾ç¤º

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç¼–è¯‘è¿è¡Œ
2. è¿›å…¥"åœºé¦†é¢„çº¦"é¡µé¢
3. æ£€æŸ¥æ¯ä¸ªåœºé¦†æ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡
4. è¿›å…¥"è¯¾ç¨‹é¢„çº¦"é¡µé¢
5. æ£€æŸ¥æ¯ä¸ªè¯¾ç¨‹æ˜¯å¦æ˜¾ç¤ºå›¾ç‰‡

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šäº‘å‡½æ•°ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶**: æç¤º"ä¸Šä¼ å¤±è´¥"æˆ–"éƒ¨ç½²å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤äº‘å¼€å‘ç¯å¢ƒå·²å¼€é€š
3. æ£€æŸ¥ `package.json` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
4. é‡æ–°ç™»å½•å¾®ä¿¡å¼€å‘è€…å·¥å…·

### é—®é¢˜2ï¼šåˆå§‹åŒ–æ•°æ®å¤±è´¥

**ç—‡çŠ¶**: è°ƒç”¨äº‘å‡½æ•°è¿”å›é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—ï¼šäº‘å¼€å‘æ§åˆ¶å° â†’ äº‘å‡½æ•° â†’ æ—¥å¿—
2. æ£€æŸ¥æ•°æ®åº“é›†åˆæ˜¯å¦å­˜åœ¨
3. ç¡®è®¤æ•°æ®åº“æƒé™é…ç½®æ­£ç¡®
4. å°è¯•ä½¿ç”¨ `clear: true` æ¸…é™¤æ•°æ®åé‡è¯•

### é—®é¢˜3ï¼šå›¾ç‰‡ä¸æ˜¾ç¤º

**ç—‡çŠ¶**: æ•°æ®åˆå§‹åŒ–æˆåŠŸï¼Œä½†å›¾ç‰‡ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `images` å­—æ®µæ˜¯å¦æ­£ç¡®: `["images/venues/xxx.jpg"]`
2. ç¡®è®¤å›¾ç‰‡æ–‡ä»¶å­˜åœ¨äº `miniprogram/images/` ç›®å½•
3. æ£€æŸ¥é¡µé¢ä»£ç æ˜¯å¦æ­£ç¡®å¼•ç”¨: `{{item.images[0]}}`
4. æ¸…é™¤å°ç¨‹åºç¼“å­˜é‡æ–°ç¼–è¯‘

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [WECHAT_IMAGE_DISPLAY_TEST_GUIDE.md](WECHAT_IMAGE_DISPLAY_TEST_GUIDE.md) - å›¾ç‰‡æ˜¾ç¤ºæµ‹è¯•æŒ‡å—
- [IMAGE_ADDITION_SUMMARY.md](IMAGE_ADDITION_SUMMARY.md) - å›¾ç‰‡æ·»åŠ æ€»ç»“
- [IMAGE_PREVIEW_REFERENCE.md](IMAGE_PREVIEW_REFERENCE.md) - å›¾ç‰‡é¢„è§ˆå‚è€ƒ

## ğŸ¯ å¿«é€Ÿå¼€å§‹

å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼ŒæŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼š

```
1. æ‹‰å–æœ€æ–°ä»£ç 
   git pull origin main

2. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ä¸Šä¼ äº‘å‡½æ•°
   å³é”® initTestData â†’ ä¸Šä¼ å¹¶éƒ¨ç½²
   å³é”® initCourseData â†’ ä¸Šä¼ å¹¶éƒ¨ç½²

3. åˆå§‹åŒ–åœºé¦†æ•°æ®
   äº‘å¼€å‘æ§åˆ¶å° â†’ äº‘å‡½æ•° â†’ initTestData â†’ æµ‹è¯•
   å‚æ•°: {"action": "venues", "clear": true}

4. åˆå§‹åŒ–è¯¾ç¨‹æ•°æ®
   äº‘å¼€å‘æ§åˆ¶å° â†’ äº‘å‡½æ•° â†’ initCourseData â†’ æµ‹è¯•
   å‚æ•°: {"action": "init", "clear": true}

5. åœ¨å°ç¨‹åºä¸­æŸ¥çœ‹æ•ˆæœ
   ç¼–è¯‘ â†’ åœºé¦†é¢„çº¦ â†’ æŸ¥çœ‹å›¾ç‰‡
   ç¼–è¯‘ â†’ è¯¾ç¨‹é¢„çº¦ â†’ æŸ¥çœ‹å›¾ç‰‡
```

---

**æœ€åæ›´æ–°**: 2026-01-20  
**ç»´æŠ¤è€…**: AI Assistant
