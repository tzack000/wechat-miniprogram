# YAML è¯­æ³•é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸ› é”™è¯¯ä¿¡æ¯

```
Invalid workflow file: .github/workflows/concurrent-test.yml#L114
You have an error in your yaml syntax on line 114
```

## ğŸ” é—®é¢˜åˆ†æ

### é”™è¯¯ä½ç½®

**æ–‡ä»¶**: `.github/workflows/concurrent-test.yml`
**è¡Œå·**: 114

### åŸå§‹ä»£ç ï¼ˆé”™è¯¯ï¼‰

```yaml
script: |
  const fs = require('fs');
  const output = fs.readFileSync('test-output.txt', 'utf8');
  const status = '${{ steps.concurrent-test.outputs.test_status }}';
  const emoji = status === 'passed' ? 'âœ…' : 'âŒ';
  
  const comment = `## ${emoji} å¹¶å‘é¢„çº¦æµ‹è¯•æŠ¥å‘Š
  
**Node.js ç‰ˆæœ¬**: ${{ matrix.node-version }}    # â† ç¬¬ 114 è¡Œï¼Œè¯­æ³•é”™è¯¯
**çŠ¶æ€**: ${status === 'passed' ? 'é€šè¿‡' : 'å¤±è´¥'}
...
```

### é”™è¯¯åŸå› 

åœ¨ YAML çš„ `script: |` å¤šè¡Œå­—ç¬¦ä¸²å—ä¸­ï¼ŒåµŒå¥—çš„ JavaScript æ¨¡æ¿å­—ç¬¦ä¸²æœ‰ä»¥ä¸‹é—®é¢˜ï¼š

1. **ç¼©è¿›ä¸ä¸€è‡´**
   - YAML å¤šè¡Œå—è¦æ±‚ä¸€è‡´çš„ç¼©è¿›
   - JavaScript æ¨¡æ¿å­—ç¬¦ä¸²å†…çš„å†…å®¹ç¼©è¿›ä¸æ­£ç¡®

2. **å˜é‡æ›¿æ¢å†²çª**
   - `${{ matrix.node-version }}` ä¼šè¢« GitHub Actions è§£æ
   - ä½†åœ¨ JavaScript æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä¹Ÿä½¿ç”¨ `${}` è¯­æ³•
   - å¯¼è‡´ YAML è§£æå™¨æ··æ·†

3. **ç‰¹æ®Šå­—ç¬¦å¤„ç†**
   - åå¼•å· `` ` `` åœ¨ YAML ä¸­å¯èƒ½éœ€è¦è½¬ä¹‰
   - Markdown ä»£ç å— ``` éœ€è¦é¢å¤–è½¬ä¹‰

## âœ… ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤åçš„ä»£ç 

```yaml
script: |
  const fs = require('fs');
  const output = fs.readFileSync('test-output.txt', 'utf8');
  const status = '${{ steps.concurrent-test.outputs.test_status }}';
  const emoji = status === 'passed' ? 'âœ…' : 'âŒ';
  
  const comment = \`## \${emoji} å¹¶å‘é¢„çº¦æµ‹è¯•æŠ¥å‘Š
  
  **Node.js ç‰ˆæœ¬**: \${{ matrix.node-version }}
  **çŠ¶æ€**: \${status === 'passed' ? 'é€šè¿‡' : 'å¤±è´¥'}
  
  ### æµ‹è¯•æ‘˜è¦
  
  \\\`\\\`\\\`
  \${summary}
  \\\`\\\`\\\`
  
  <details>
  <summary>æŸ¥çœ‹å®Œæ•´è¾“å‡º</summary>
  
  \\\`\\\`\\\`
  \${output.slice(-2000)}
  \\\`\\\`\\\`
  
  </details>
  
  ---
  *ç”± GitHub Actions è‡ªåŠ¨ç”Ÿæˆ*\`;
```

### ä¿®å¤è¦ç‚¹

1. **ç»Ÿä¸€ç¼©è¿›**
   - æ¨¡æ¿å­—ç¬¦ä¸²å†…æ‰€æœ‰è¡Œä¿æŒç›¸åŒçš„ç¼©è¿›çº§åˆ«
   - ä¸ `const comment = ` å¯¹é½

2. **è½¬ä¹‰ GitHub Actions å˜é‡**
   - `${{ }}` â†’ `\${{ }}`
   - é˜²æ­¢åœ¨ JavaScript å­—ç¬¦ä¸²ä¸­è¢«æ„å¤–æ›¿æ¢

3. **è½¬ä¹‰æ¨¡æ¿å­—ç¬¦ä¸²è¯­æ³•**
   - ä½¿ç”¨ `\`` è€Œä¸æ˜¯ `` ` ``
   - JavaScript ä»èƒ½æ­£ç¡®è§£æ

4. **è½¬ä¹‰ Markdown ä»£ç å—**
   - `` ``` `` â†’ `\\\`\\\`\\\``
   - ä¸‰å±‚è½¬ä¹‰ç¡®ä¿åœ¨å­—ç¬¦ä¸²ä¸­æ­£ç¡®æ˜¾ç¤º

## ğŸ§ª éªŒè¯

### æœ¬åœ° YAML éªŒè¯

```bash
$ python3 -c "import yaml; yaml.safe_load(open('.github/workflows/concurrent-test.yml'))"
âœ… YAML è¯­æ³•æ­£ç¡®
```

### è¯­æ³•æ£€æŸ¥é€šè¿‡

- âœ… YAML è§£æå™¨éªŒè¯é€šè¿‡
- âœ… æ²¡æœ‰è¯­æ³•é”™è¯¯
- âœ… ç»“æ„æ­£ç¡®

## ğŸ“Š ä¿®å¤è¯¦æƒ…

### Git æäº¤

**Commit**: `7d4fb92`

```
ä¿®å¤YAMLè¯­æ³•é”™è¯¯ï¼šä¿®æ­£JavaScriptæ¨¡æ¿å­—ç¬¦ä¸²ç¼©è¿›

- ä¿®å¤ç¬¬114è¡Œçš„YAMLè¯­æ³•é”™è¯¯
- JavaScriptæ¨¡æ¿å­—ç¬¦ä¸²éœ€è¦æ­£ç¡®çš„ç¼©è¿›å’Œè½¬ä¹‰
- è½¬ä¹‰${{ }}é˜²æ­¢GitHub Actionså˜é‡æ›¿æ¢å†²çª
- è½¬ä¹‰åå¼•å·é˜²æ­¢Markdownä»£ç å—è§£æé—®é¢˜
- æœ¬åœ°éªŒè¯ï¼šYAMLè¯­æ³•æ£€æŸ¥é€šè¿‡
```

### ä¿®æ”¹ç»Ÿè®¡

- **ä¿®æ”¹æ–‡ä»¶**: 1 ä¸ª
- **ä¿®æ”¹è¡Œæ•°**: 42 è¡Œ (21 è¡Œåˆ é™¤, 21 è¡Œæ·»åŠ )
- **å½±å“èŒƒå›´**: PR è¯„è®ºåŠŸèƒ½çš„æ¨¡æ¿å­—ç¬¦ä¸²

## ğŸ¯ é¢„æœŸç»“æœ

ä¿®å¤åï¼ŒGitHub Actions åº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… æˆåŠŸè§£æ workflow æ–‡ä»¶
2. âœ… æ­£ç¡®æ‰§è¡Œæ‰€æœ‰ jobs
3. âœ… åœ¨ PR ä¸­æ­£ç¡®ç”Ÿæˆè¯„è®ºï¼ˆå¦‚æœæœ‰ PRï¼‰
4. âœ… æµ‹è¯•é€šè¿‡å¹¶æ˜¾ç¤ºç»¿è‰²çŠ¶æ€

## ğŸ“‹ å®Œæ•´ä¿®å¤æ—¶é—´çº¿

| æ—¶é—´ç‚¹ | é—®é¢˜/ä¿®å¤ | æäº¤ | çŠ¶æ€ |
|--------|----------|------|------|
| ç¬¬ 1 æ¬¡ | npm ci å¤±è´¥ | `7f8bd1c` | âœ… å·²ä¿®å¤ |
| ç¬¬ 2 æ¬¡ | Test Badge å¤±è´¥ | `ebef8bc` | âœ… å·²ç¦ç”¨ |
| ç¬¬ 3 æ¬¡ | åˆ é™¤ Test Badge | `2be11fe` | âœ… å·²åˆ é™¤ |
| ç¬¬ 4 æ¬¡ | YAML è¯­æ³•é”™è¯¯ | `7d4fb92` | âœ… å·²ä¿®å¤ |

## ğŸ”„ å½“å‰çŠ¶æ€

### å·¥ä½œæµé…ç½®

- **æ–‡ä»¶**: `.github/workflows/concurrent-test.yml`
- **çŠ¶æ€**: âœ… YAML è¯­æ³•æ­£ç¡®
- **Jobs**: 5 ä¸ª
- **åŠŸèƒ½**: å®Œæ•´

### ä¸‹ä¸€æ­¥

ç­‰å¾… GitHub Actions è¿è¡Œæœ€æ–°æäº¤ (`7d4fb92`)ï¼š

1. **è®¿é—®**: https://github.com/tzack000/wechat-venue-parking-miniprogram/actions
2. **æŸ¥çœ‹**: æœ€æ–°è¿è¡Œè®°å½•
3. **æœŸæœ›**: æ‰€æœ‰ 5 ä¸ª jobs ç»¿è‰²é€šè¿‡

## ğŸ“š ç»éªŒæ€»ç»“

### YAML ä¸­ä½¿ç”¨ JavaScript çš„æœ€ä½³å®è·µ

1. **é¿å…å¤æ‚çš„åµŒå¥—å­—ç¬¦ä¸²**
   - è€ƒè™‘å°†è„šæœ¬ç‹¬ç«‹åˆ°æ–‡ä»¶ä¸­
   - ä½¿ç”¨ `run: |` å—æ—¶ä¿æŒç®€æ´

2. **æ³¨æ„è½¬ä¹‰å±‚çº§**
   - YAML å±‚
   - Shell å±‚ï¼ˆå¦‚æœæœ‰ï¼‰
   - JavaScript/è¯­è¨€å±‚

3. **ä½¿ç”¨å˜é‡æ›¿æ¢æ—¶è¦å°å¿ƒ**
   - GitHub Actions: `${{ }}`
   - Shell: `$VARIABLE`
   - JavaScript: `${variable}`
   - ç¡®ä¿ä¸å†²çª

4. **æœ¬åœ°éªŒè¯**
   - ä½¿ç”¨ YAML linter
   - ä½¿ç”¨ GitHub Actions æœ¬åœ°è¿è¡Œå·¥å…·ï¼ˆå¦‚ `act`ï¼‰

### å¸¸è§ YAML é™·é˜±

1. **ç¼©è¿›é—®é¢˜** - YAML å¯¹ç¼©è¿›éå¸¸æ•æ„Ÿ
2. **ç‰¹æ®Šå­—ç¬¦** - å¼•å·ã€åå¼•å·ã€ç¾å…ƒç¬¦å·éœ€è¦æ³¨æ„
3. **å¤šè¡Œå­—ç¬¦ä¸²** - `|` å’Œ `>` çš„åŒºåˆ«
4. **å˜é‡ä½œç”¨åŸŸ** - ä¸åŒå±‚çº§çš„å˜é‡å¯èƒ½å†²çª

## ğŸ› ï¸ è°ƒè¯•æŠ€å·§

### å¦‚ä½•å¿«é€Ÿå®šä½ YAML é”™è¯¯

1. **ä½¿ç”¨è¡Œå·**
   - GitHub ä¼šæŒ‡å‡ºå…·ä½“çš„é”™è¯¯è¡Œ
   - ä»è¯¥è¡Œå‘ä¸Šä¸‹æ–‡æŸ¥çœ‹

2. **æ£€æŸ¥ç¼©è¿›**
   - ä½¿ç”¨ç©ºæ ¼ï¼Œä¸è¦ç”¨ Tab
   - ç¡®ä¿åŒçº§å…ƒç´ ç¼©è¿›ä¸€è‡´

3. **éªŒè¯å·¥å…·**
   - yamllint
   - Python yaml æ¨¡å—
   - åœ¨çº¿ YAML validator

4. **é€æ­¥ç®€åŒ–**
   - æ³¨é‡Šæ‰å¤æ‚éƒ¨åˆ†
   - é€æ­¥æ¢å¤ç›´åˆ°æ‰¾åˆ°é—®é¢˜

### æœ¬æ¬¡é—®é¢˜çš„å…³é”®

```yaml
# âŒ é”™è¯¯ - ç¼©è¿›ä¸ä¸€è‡´
const comment = `text
**bold**: value
more text`

# âœ… æ­£ç¡® - ç»Ÿä¸€ç¼©è¿›
const comment = \`text
  **bold**: value
  more text\`
```

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2026-01-20
**æäº¤å“ˆå¸Œ**: 7d4fb92
**çŠ¶æ€**: âœ… YAML è¯­æ³•é”™è¯¯å·²ä¿®å¤ï¼Œç­‰å¾… GitHub Actions éªŒè¯
